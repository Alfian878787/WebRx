!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.wx=b():a.wx=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c(1));var e=c(4);b.property=e.property;var f=c(5);b.command=f.command,b.asyncCommand=f.asyncCommand,b.isCommand=f.isCommand;var g=c(8);b.getOid=g.getOid;var h=c(9);b.list=h.list;var i=c(15);b.isList=i.isList;var j=c(16);b.createMap=j.createMap;var k=c(17);b.createSet=k.createSet,b.setToArray=k.setToArray;var l=c(18);b.createWeakMap=l.createWeakMap;var m=c(10);b.Lazy=m["default"];var n=c(6);b.injector=n.injector;var o=c(3);b.IID=o["default"];var p=c(19);b.getHttpClientDefaultConfig=p.getHttpClientDefaultConfig;var q=c(7);b.res=q;var r=c(20);r.install();var s=c(21),t=c(19);b.app={defaultExceptionHandler:Rx.Observer.create(function(a){}),mainThreadScheduler:this._unitTestMainThreadScheduler||this._mainThreadScheduler||Rx.Scheduler.currentThread},n.injector.register(q.app,b.app).register(q.messageBus,[s["default"]],!0).register(q.httpClient,[t["default"]],!1),b.messageBus=n.injector.get(q.messageBus)},function(a,b,c){function d(){return"undefined"==typeof this}function e(a){var b=typeof a;return"boolean"===b||"number"===b||"string"===b}function f(a,b){if(null==a||e(a))return!1;var c=a;return w(c.queryInterface)?c.queryInterface(b):!1}function g(a,b){return Object.keys(a).filter(function(c){var d=a[c];return f(d,b)}).map(function(b){return new L(b,a[b])})}function h(a){Object.keys(a).filter(function(b){var c=a[b];return null!=c&&w(c.dispose)}).map(function(b){return a[b]}).forEach(function(a){return a.dispose()})}function i(a){return null==a?!1:f(a,I["default"].IObservableProperty)}function j(a){return null==a?!1:Rx.Scheduler.isScheduler(a)}function k(a){return null==a?!1:a instanceof K}function l(a){return null==a?!1:Rx.helpers.isPromise(a)}function m(a){return i(a)?a():a}function n(a){if(i(a)){var b=a;return b.changed.startWith(b())}return k(a)?a:void G("getObservable: '"+a+"' is neither observable property nor observable")}function o(){return window&&window.jasmine&&void 0!==window.jasmine.version_?!0:window&&window.getJasmineRequireObj&&"function"==typeof window.getJasmineRequireObj?!0:!1}function p(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}function q(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=/\{\d+\}/g;return a.replace(d,function(a){return b[a.match(/\d+/)]})}function r(a,b,c){var d;if(c)for(d in a)b[d]=a[d];else for(var e=Object.getOwnPropertyNames(a),f=0;f<e.length;f++)d=e[f],b[d]=a[d];return b}function s(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(c){var e,f,g=a.className.match(J)||[];if(b)for(var h=0;h<c.length;h++)f=c[h],e=g.indexOf(f),-1===e&&g.push(f);else for(var h=0;h<c.length;h++)f=c[h],e=g.indexOf(f),-1!==e&&g.splice(e,1);a.className=g.join(" ")}}function t(a,b){var c=a.className.match(J)||[];return-1!==c.indexOf(b)}function u(a){a.getBoundingClientRect()}function v(a){return a instanceof HTMLButtonElement||a instanceof HTMLAnchorElement||a instanceof HTMLInputElement||a instanceof HTMLFieldSetElement||a instanceof HTMLLinkElement||a instanceof HTMLOptGroupElement||a instanceof HTMLOptionElement||a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement}function w(a){return"function"==typeof a||!1}function x(a){return f(a,I["default"].IDisposable)||w(a.dispose)}function y(a,b,c,d){var e={}.toString;if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;var f=e.call(a);if(f!==e.call(b))return!1;switch(f){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var g="[object Array]"===f;if(!g){if("object"!=typeof a||"object"!=typeof b)return!1;var h=a.constructor,i=b.constructor;if(h!==i&&!(w(h)&&h instanceof h&&w(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),g){if(j=a.length,j!==b.length)return!1;for(;j--;)if(!y(a[j],b[j],c,d))return!1}else{var k,l=Object.keys(a);if(j=l.length,Object.keys(b).length!==j)return!1;for(;j--;)if(k=l[j],!b.hasOwnProperty(k)||!y(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0}function z(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d].cloneNode(!0);return c}function A(a){return Array.prototype.slice.call(a)}function B(a){return A(a.childNodes)}function C(a,b){if(!a)throw new Error("disp");if(!b)throw new Error("action");try{b(a)}finally{a.dispose()}}function D(a){var b=null!=window?window.require:null;return w(b)||G("there's no AMD-module loader available (Hint: did you forget to include RequireJS in your project?)"),Rx.Observable.create(function(c){try{b([a],function(a){c.onNext(a),c.onCompleted()},function(a){c.onError(a)})}catch(d){c.onError(d)}return Rx.Disposable.empty})}function E(a,b,c){void 0===c&&(c=!1);var d=f(a,I["default"].IHandleObservableErrors)?a.thrownExceptions:b;return Rx.Observable.create(function(b){var e=new Rx.CompositeDisposable,f=g(a,I["default"].IObservableProperty);return f.forEach(function(a){var f=a.property,g=c?f.changing:f.changed;e.add(g.subscribe(function(c){var e=new H.PropertyChangedEventArgs(self,a.propertyName);try{b.onNext(e)}catch(f){d.onNext(f)}}))}),e}).publish().refCount()}function F(){if(2===arguments.length)return n(arguments[0]).select(arguments[1]);var a=p(arguments),b=a.pop();return a=a.map(function(a){return n(a)}),a.push(b),Rx.Observable.combineLatest.apply(this,a)}function G(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d="WebRx: "+q(a,b);throw new Error(d)}var H=c(2),I=c(3),J=/\S+/g,K=Rx.Observable;b.noop=function(){},b.isStrictMode=d,b.isPrimitive=e,b.queryInterface=f,b.getOwnPropertiesImplementingInterface=g,b.disposeMembers=h,b.isProperty=i,b.isRxScheduler=j,b.isRxObservable=k,b.isPromise=l,b.unwrapProperty=m,b.getObservable=n,b.isInUnitTest=o,b.args2Array=p,b.formatString=q,b.extend=r;var L=function(){function a(a,b){this.property=b,this.propertyName=a}return a}();b.PropertyInfo=L,b.toggleCssClass=s,b.hasCssClass=t,b.triggerReflow=u,b.elementCanBeDisabled=v,b.isFunction=w,b.isDisposable=x,b.isEqual=y,b.cloneNodeArray=z,b.nodeListToArray=A,b.nodeChildrenToArray=B,b.using=C,b.observableRequire=D,b.observeObject=E,b.whenAny=F,b.throwError=G},function(a,b){"use strict";var c=function(){function a(a,b){this.propertyName=b,this.sender=a}return a}();b.PropertyChangedEventArgs=c},function(a,b){"use strict";var c=function(){function a(){}return a.IDisposable="IDisposable",a.IObservableProperty="IObservableProperty",a.IObservableList="IObservableList",a.ICommand="ICommand",a.IHandleObservableErrors="IHandleObservableErrors",a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){function d(a){var b=function(a){return arguments.length>0?void(a!==b.value&&(b.changingSubject.onNext(a),b.value=a,b.changedSubject.onNext(a))):b.value};return b.queryInterface=function(a){return a===e["default"].IObservableProperty||a===e["default"].IDisposable},b.dispose=function(){},void 0!==a&&(b.value=a),b.changedSubject=new Rx.Subject,b.changed=b.changedSubject.asObservable(),b.changingSubject=new Rx.Subject,b.changing=b.changingSubject.asObservable(),b}var e=c(3);b.property=d},function(a,b,c){function d(){var a,b,c,d,f=h.args2Array(arguments);return h.isFunction(f[0])?(b=f.shift(),a=h.isRxObservable(f[0])?f.shift():Rx.Observable["return"](!0),c=h.isRxScheduler(f[0])?f.shift():void 0,d=f.shift(),null!=d&&(b=b.bind(d)),e(a,function(a){return Rx.Observable.create(function(c){try{b(a),c.onNext(null),c.onCompleted()}catch(d){c.onError(d)}return Rx.Disposable.empty})},c)):(a=f.shift()||Rx.Observable["return"](!0),c=h.isRxScheduler(f[0])?f.shift():void 0,new k(a,function(a){return Rx.Observable["return"](a)},c))}function e(){var a,b,c,d,e=h.args2Array(arguments);return h.isFunction(e[0])?(b=e.shift(),c=h.isRxScheduler(e[0])?e.shift():void 0,d=e.shift(),null!=d&&(b=b.bind(d)),new k(Rx.Observable["return"](!0),b,c)):(a=e.shift(),b=e.shift(),c=h.isRxScheduler(e[0])?e.shift():void 0,new k(a,b,c))}function f(a){return null==a?!1:a instanceof k||h.queryInterface(a,g["default"].ICommand)}var g=c(3),h=c(1),i=c(6),j=c(7),k=function(){function a(a,b,c){var d=this;this.resultsSubject=new Rx.Subject,this.isExecutingSubject=new Rx.Subject,this.inflightCount=0,this.canExecuteLatest=!1,this.scheduler=c||i.injector.get(j.app).mainThreadScheduler,this.func=b;var e=a.combineLatest(this.isExecutingSubject.startWith(!1),function(a,b){return a&&!b})["catch"](function(a){return d.exceptionsSubject.onNext(a),Rx.Observable["return"](!1)})["do"](function(a){d.canExecuteLatest=a}).startWith(this.canExecuteLatest).distinctUntilChanged().publish();this.canExecuteDisp=e.connect(),this.canExecuteObservable=e,this.exceptionsSubject=new Rx.Subject,this.thrownExceptions=this.exceptionsSubject.asObservable(),this.exceptionsSubject.observeOn(this.scheduler).subscribe(i.injector.get(j.app).defaultExceptionHandler)}return a.prototype.queryInterface=function(a){return a===g["default"].ICommand||a===g["default"].IDisposable},a.prototype.dispose=function(){var a=this.canExecuteDisp;null!=a&&a.dispose()},Object.defineProperty(a.prototype,"isExecuting",{get:function(){return this.isExecutingSubject.startWith(this.inflightCount>0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"results",{get:function(){return this.resultsSubject.asObservable()},enumerable:!0,configurable:!0}),a.prototype.canExecute=function(a){return this.canExecuteLatest},a.prototype.execute=function(a){this.executeAsync(a)["catch"](Rx.Observable.empty()).subscribe()},a.prototype.executeAsync=function(a){var b=this,c=this.canExecute(a)?Rx.Observable.create(function(c){1===++b.inflightCount&&b.isExecutingSubject.onNext(!0);var d=new Rx.SerialDisposable;d.setDisposable(Rx.Disposable.create(function(){0===--b.inflightCount&&b.isExecutingSubject.onNext(!1)}));var e=b.func(a).observeOn(b.scheduler)["do"](function(a){},function(a){return d.setDisposable(Rx.Disposable.empty)},function(){return d.setDisposable(Rx.Disposable.empty)})["do"](function(a){return b.resultsSubject.onNext(a)},function(a){return b.exceptionsSubject.onNext(a)}).subscribe(c);return new Rx.CompositeDisposable(e,d)}):Rx.Observable["throw"](new Error("canExecute currently forbids execution"));return c.publish().refCount()},a}();b.Command=k;var l;!function(a){a.commandConstructor=k}(l=b.internal||(b.internal={})),b.command=d,b.asyncCommand=e,b.isCommand=f},function(a,b,c){var d=c(1),e=c(7),f=function(){function a(){this.registrations={}}return a.prototype.register=function(){var a,b=arguments[0],c=arguments[1],e=arguments[2];if(this.registrations.hasOwnProperty(b)&&d.throwError("'{0}' is already registered",b),d.isFunction(c))a=function(a,b){return c.apply(null,a)};else if(Array.isArray(c)){var f=this,g=c.pop(),h=c;a=function(a,c){var e=h.map(function(a){try{return f.get(a,void 0,c)}catch(e){d.throwError("Error resolving dependency '{0}' for '{1}': {2}",a,b,e)}}),i=[null].concat(e).concat(a),j=g.bind.apply(g,i);return new j}}else a=function(a,b){return c};return this.registrations[b]={factory:a,isSingleton:e},this},a.prototype.get=function(a,b,c){c=c||{},c.hasOwnProperty(a)&&d.throwError("Detected circular dependency a from '{0}' to '{1}'",Object.keys(c).join(", "),a);var e=this.registrations[a];if(void 0===e&&d.throwError("'{0}' is not registered",a),e.isSingleton&&e.value)return e.value;var f={};f[a]=!0,d.extend(c,f);var g=e.factory(b,f);return e.isSingleton&&(e.value=g),g},a.prototype.resolve=function(a,b){var c=a.pop();d.isFunction(c)||d.throwError("Error resolving inline-annotated-array. Constructor must be of type 'function' but is '{0}",typeof c);var e=this,f=a.map(function(b){try{return e.get(b,void 0,a)}catch(f){d.throwError("Error resolving dependency '{0}' for '{1}': {2}",b,Object.getPrototypeOf(c),f)}}),g=[null].concat(f).concat(b),h=c.bind.apply(c,g);return new h},a}();b.injector=new f,b.injector.register(e.injector,function(){return new f})},function(a,b){"use strict";b.app="app",b.injector="injector",b.domManager="domservice",b.router="router",b.messageBus="messageBus",b.expressionCompiler="expressioncompiler",b.templateEngine="templateEngine",b.httpClient="httpClient",b.simpleBindingHandler="bindings.simple",b.hasValueBindingValue="has.bindings.value",b.valueBindingValue="bindings.value"},function(a,b){"use strict";function c(a){if(null==a)return void 0;var b=typeof a;if("boolean"===b||"number"===b||"string"===b)return b+":"+a;var c=a[e];return void 0!==c?c:(c=(d++).toString(),Object.defineProperty(a,e,{enumerable:!1,configurable:!1,writable:!1,value:c}),c)}var d=1,e="__wx_oid__"+(new Date).getTime();b.getOid=c},function(a,b,c){function d(a,b,c){return void 0===b&&(b=.3),void 0===c&&(c=null),new q(a,b,c)}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=c(1),g=c(8),h=c(3),i=c(10),j=c(11),k=c(2),l=c(12),m=c(13),n=c(6),o=c(7),p=c(14),q=function(){function a(a,b,c){void 0===b&&(b=.3),void 0===c&&(c=null),this.push=this.add,this.changeNotificationsSuppressed=0,this.propertyChangeWatchers=null,this.resetChangeThreshold=0,this.resetSubCount=0,this.hasWhinedAboutNoResetSub=!1,this.readonlyExceptionMessage="Derived collections cannot be modified.",this.disposables=new Rx.CompositeDisposable,this.app=n.injector.get(o.app),this.setupRx(a,b,c)}return a.prototype.queryInterface=function(a){return a===h["default"].IObservableList||a===h["default"].IDisposable},a.prototype.dispose=function(){this.clearAllPropertyChangeWatchers(),this.disposables.dispose()},Object.defineProperty(a.prototype,"itemsAdded",{get:function(){return this._itemsAdded||(this._itemsAdded=this.itemsAddedSubject.value.asObservable()),this._itemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsAdded",{get:function(){return this._beforeItemsAdded||(this._beforeItemsAdded=this.beforeItemsAddedSubject.value.asObservable()),this._beforeItemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsRemoved",{get:function(){return this._itemsRemoved||(this._itemsRemoved=this.itemsRemovedSubject.value.asObservable()),this._itemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsRemoved",{get:function(){return this._beforeItemsRemoved||(this._beforeItemsRemoved=this.beforeItemsRemovedSubject.value.asObservable()),this._beforeItemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemReplaced",{get:function(){return this._itemReplaced||(this._itemReplaced=this.itemReplacedSubject.value.asObservable()),this._itemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemReplaced",{get:function(){return this._beforeItemReplaced||(this._beforeItemReplaced=this.beforeItemReplacedSubject.value.asObservable()),this._beforeItemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsMoved",{get:function(){return this._beforeItemsMoved||(this._beforeItemsMoved=this.beforeItemsMovedSubject.value.asObservable()),this._beforeItemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsMoved",{get:function(){return this._itemsMoved||(this._itemsMoved=this.itemsMovedSubject.value.asObservable()),this._itemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanging",{get:function(){var a=this;return this._lengthChanging||(this._lengthChanging=this.listChanging.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanged",{get:function(){var a=this;return this._lengthChanged||(this._lengthChanged=this.listChanged.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanged},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemChanging",{get:function(){return this._itemChanging||(this._itemChanging=this.itemChangingSubject.value.asObservable()),this._itemChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemChanged",{get:function(){return this._itemChanged||(this._itemChanged=this.itemChangedSubject.value.asObservable()),this._itemChanged},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldReset",{get:function(){var a=this;return this.refcountSubscribers(this.listChanged.selectMany(function(a){return a?Rx.Observable["return"](null):Rx.Observable.empty()}),function(b){return a.resetSubCount+=b})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"changeTrackingEnabled",{get:function(){return null!=this.propertyChangeWatchers},set:function(a){var b=this;null!=this.propertyChangeWatchers&&a||(null!=this.propertyChangeWatchers||a)&&(a?(this.propertyChangeWatchers={},this.inner.forEach(function(a){return b.addItemToPropertyTracking(a)})):(this.clearAllPropertyChangeWatchers(),this.propertyChangeWatchers=null))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),a.prototype.addRange=function(a){var b=this;null==a&&f.throwError("items");var c=this.isLengthAboveResetThreshold(a.length)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(c,function(){if(b.areChangeNotificationsEnabled()){var c=b.inner.length;b.beforeItemsAddedSubject.isValueCreated&&b.beforeItemsAddedSubject.value.onNext({items:a,from:c}),Array.prototype.push.apply(b.inner,a),b.itemsAddedSubject.isValueCreated&&b.itemsAddedSubject.value.onNext({items:a,from:c}),b.changeTrackingEnabled&&a.forEach(function(a){b.addItemToPropertyTracking(a)})}else Array.prototype.push.apply(b.inner,a),b.changeTrackingEnabled&&a.forEach(function(a){b.addItemToPropertyTracking(a)})})},a.prototype.insertRange=function(a,b){var c=this;null==b&&f.throwError("collection"),a>this.inner.length&&f.throwError("index");var d=this.isLengthAboveResetThreshold(b.length)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(d,function(){c.areChangeNotificationsEnabled()?(c.beforeItemsAddedSubject.isValueCreated&&c.beforeItemsAddedSubject.value.onNext({items:b,from:a}),Array.prototype.splice.apply(c.inner,[a,0].concat(b)),c.itemsAddedSubject.isValueCreated&&c.itemsAddedSubject.value.onNext({items:b,from:a}),c.changeTrackingEnabled&&b.forEach(function(a){c.addItemToPropertyTracking(a)})):(Array.prototype.splice.apply(c.inner,[a,0].concat(b)),c.changeTrackingEnabled&&b.forEach(function(a){c.addItemToPropertyTracking(a)}))})},a.prototype.removeAll=function(a){var b=this;null==a&&f.throwError("items");var c=Array.isArray(a)?a:this.inner.filter(a),d=this.isLengthAboveResetThreshold(c.length)?this.suppressChangeNotifications():Rx.Disposable.empty;return f.using(d,function(){c.forEach(function(a){return b.remove(a)})}),c},a.prototype.removeRange=function(a,b){var c=this,d=this.isLengthAboveResetThreshold(b)?this.suppressChangeNotifications():Rx.Disposable.empty;f.using(d,function(){var d=c.inner.slice(a,a+b);c.areChangeNotificationsEnabled()?(c.beforeItemsRemovedSubject.isValueCreated&&c.beforeItemsRemovedSubject.value.onNext({items:d,from:a}),c.inner.splice(a,b),c.changeTrackingEnabled&&d.forEach(function(a){c.removeItemFromPropertyTracking(a)}),c.itemsRemovedSubject.isValueCreated&&c.itemsRemovedSubject.value.onNext({items:d,from:a})):(c.inner.splice(a,b),c.changeTrackingEnabled&&d.forEach(function(a){c.removeItemFromPropertyTracking(a)}))})},a.prototype.toArray=function(){return this.inner},a.prototype.reset=function(a){var b=this;null==a?this.publishResetNotification():f.using(this.suppressChangeNotifications(),function(c){b.clear(),b.addRange(a)})},a.prototype.add=function(a){this.insertItem(this.inner.length,a)},a.prototype.clear=function(){this.clearItems()},a.prototype.contains=function(a){return-1!==this.inner.indexOf(a)},a.prototype.remove=function(a){var b=this.inner.indexOf(a);return-1===b?!1:(this.removeItem(b),!0)},a.prototype.indexOf=function(a){return this.inner.indexOf(a)},a.prototype.insert=function(a,b){this.insertItem(a,b)},a.prototype.removeAt=function(a){this.removeItem(a)},a.prototype.move=function(a,b){this.moveItem(a,b)},a.prototype.project=function(){var a=f.args2Array(arguments),b=a.shift();if(null!=b&&f.isRxObservable(b))return new r(this,void 0,void 0,void 0,b,a.shift());var c=a.shift();if(null!=c&&f.isRxObservable(c))return new r(this,b,void 0,void 0,c,a.shift());var d=a.shift();return null!=d&&f.isRxObservable(d)?new r(this,b,c,void 0,d,a.shift()):new r(this,b,c,d,a.shift(),a.shift())},a.prototype.page=function(a,b,c){return new p.PagedObservableListProjection(this,a,b,c)},a.prototype.suppressChangeNotifications=function(){var a=this;return this.changeNotificationsSuppressed++,this.hasWhinedAboutNoResetSub||0!==this.resetSubCount||f.isInUnitTest()||(m.hint("suppressChangeNotifications was called (perhaps via addRange), yet you do not have a subscription to shouldReset. This probably isn't what you want, as itemsAdded and friends will appear to 'miss' items"),this.hasWhinedAboutNoResetSub=!0),Rx.Disposable.create(function(){a.changeNotificationsSuppressed--,0===a.changeNotificationsSuppressed&&(a.publishBeforeResetNotification(),a.publishResetNotification())})},a.prototype.get=function(a){return this.inner[a]},a.prototype.set=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext({from:a,items:[b]}),this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),this.inner[a]=b,void(this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext({from:a,items:[b]}))):(this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),void(this.inner[a]=b))},a.prototype.sort=function(a){this.publishBeforeResetNotification(),this.inner.sort(a),this.publishResetNotification()},a.prototype.forEach=function(a,b){this.inner.forEach(a,b)},a.prototype.map=function(a,b){return this.inner.map(a,b)},a.prototype.filter=function(a,b){return this.inner.filter(a,b)},a.prototype.some=function(a,b){return this.inner.some(a,b)},a.prototype.every=function(a,b){return this.inner.every(a,b)},a.prototype.setupRx=function(a,b,c){void 0===b&&(b=.3),void 0===c&&(c=null),c=c||n.injector.get(o.app).mainThreadScheduler,this.resetChangeThreshold=b,void 0===this.inner&&(this.inner=new Array),this.beforeItemsAddedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsAddedSubject=new i["default"](function(){return new Rx.Subject}),this.beforeItemsRemovedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsRemovedSubject=new i["default"](function(){return new Rx.Subject}),this.beforeItemReplacedSubject=new i["default"](function(){return new Rx.Subject}),this.itemReplacedSubject=new i["default"](function(){return new Rx.Subject}),this.resetSubject=new Rx.Subject,this.beforeResetSubject=new Rx.Subject,this.itemChangingSubject=new i["default"](function(){return j.createScheduledSubject(c)}),this.itemChangedSubject=new i["default"](function(){return j.createScheduledSubject(c)}),this.beforeItemsMovedSubject=new i["default"](function(){return new Rx.Subject}),this.itemsMovedSubject=new i["default"](function(){return new Rx.Subject}),this.listChanged=Rx.Observable.merge(this.itemsAdded.select(function(a){return!1}),this.itemsRemoved.select(function(a){return!1}),this.itemReplaced.select(function(a){return!1}),this.itemsMoved.select(function(a){return!1}),this.resetSubject.select(function(a){return!0})).publish().refCount(),this.listChanging=Rx.Observable.merge(this.beforeItemsAdded.select(function(a){return!1}),this.beforeItemsRemoved.select(function(a){return!1}),this.beforeItemReplaced.select(function(a){return!1}),this.beforeItemsMoved.select(function(a){return!1}),this.beforeResetSubject.select(function(a){return!0})).publish().refCount(),a&&Array.prototype.splice.apply(this.inner,[0,0].concat(a)),this.length=this.lengthChanged.toProperty(this.inner.length),this.disposables.add(this.length),this.isEmpty=this.lengthChanged.select(function(a){return 0===a}).toProperty(0===this.inner.length),this.disposables.add(this.isEmpty)},a.prototype.areChangeNotificationsEnabled=function(){return 0===this.changeNotificationsSuppressed},a.prototype.insertItem=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,0,b),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b))):(this.inner.splice(a,0,b),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b)))},a.prototype.removeItem=function(a){var b=this.inner[a];return this.areChangeNotificationsEnabled()?(this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,1),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b))):(this.inner.splice(a,1),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b)))},a.prototype.moveItem=function(a,b){var c=this.inner[a];if(!this.areChangeNotificationsEnabled())return this.inner.splice(a,1),void this.inner.splice(b,0,c);var d={items:[c],from:a,to:b};this.beforeItemsMovedSubject.isValueCreated&&this.beforeItemsMovedSubject.value.onNext(d),this.inner.splice(a,1),this.inner.splice(b,0,c),this.itemsMovedSubject.isValueCreated&&this.itemsMovedSubject.value.onNext(d)},a.prototype.clearItems=function(){return this.areChangeNotificationsEnabled()?(this.publishBeforeResetNotification(),this.inner.length=0,this.publishResetNotification(),void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers())):(this.inner.length=0,void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers()))},a.prototype.addItemToPropertyTracking=function(a){var b=this.propertyChangeWatchers[g.getOid(a)],c=this;if(b)return void b.addRef();var d=f.observeObject(a,this.app.defaultExceptionHandler,!0).select(function(b){return new k.PropertyChangedEventArgs(a,b.propertyName)}),e=f.observeObject(a,this.app.defaultExceptionHandler,!1).select(function(b){return new k.PropertyChangedEventArgs(a,b.propertyName)}),h=new Rx.CompositeDisposable(d.where(function(a){return c.areChangeNotificationsEnabled()}).subscribe(function(a){return c.itemChangingSubject.value.onNext(a)}),e.where(function(a){return c.areChangeNotificationsEnabled()}).subscribe(function(a){return c.itemChangedSubject.value.onNext(a)}));this.propertyChangeWatchers[g.getOid(a)]=new l["default"](Rx.Disposable.create(function(){h.dispose(),delete c.propertyChangeWatchers[g.getOid(a)]}))},a.prototype.removeItemFromPropertyTracking=function(a){var b=this.propertyChangeWatchers[g.getOid(a)];b&&b.release()},a.prototype.clearAllPropertyChangeWatchers=function(){var a=this;null!=this.propertyChangeWatchers&&(Object.keys(this.propertyChangeWatchers).forEach(function(b){a.propertyChangeWatchers[b].release()}),this.propertyChangeWatchers=null)},a.prototype.refcountSubscribers=function(a,b){return Rx.Observable.create(function(c){return b(1),new Rx.CompositeDisposable(a.subscribe(c),Rx.Disposable.create(function(){return b(-1)}))})},a.prototype.publishResetNotification=function(){this.resetSubject.onNext(!0)},a.prototype.publishBeforeResetNotification=function(){this.beforeResetSubject.onNext(!0)},a.prototype.isLengthAboveResetThreshold=function(a){return a/this.inner.length>this.resetChangeThreshold&&a>10},a}();b.ObservableList=q,b.list=d;var r=function(a){function b(b,c,d,e,f,g){a.call(this),this.indexToSourceIndexMap=[],this.sourceCopy=[],this.disp=new Rx.CompositeDisposable,this.source=b,this.selector=e||function(a){return a},this._filter=c,this.orderer=d,this.refreshTrigger=f,this.scheduler=g||Rx.Scheduler.immediate,this.addAllItemsFromSourceCollection(),this.wireUpChangeNotifications()}return e(b,a),Object.defineProperty(b.prototype,"isReadOnly",{get:function(){return!0},enumerable:!0,configurable:!0}),b.prototype.set=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.addRange=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.insertRange=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.removeAll=function(a){return void f.throwError(this.readonlyExceptionMessage)},b.prototype.removeRange=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.add=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.clear=function(){f.throwError(this.readonlyExceptionMessage)},b.prototype.remove=function(a){return void f.throwError(this.readonlyExceptionMessage)},b.prototype.insert=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.removeAt=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.move=function(a,b){f.throwError(this.readonlyExceptionMessage)},b.prototype.sort=function(a){f.throwError(this.readonlyExceptionMessage)},b.prototype.reset=function(){var b=this;f.using(a.prototype.suppressChangeNotifications.call(this),function(){a.prototype.clear.call(b),b.indexToSourceIndexMap=[],b.sourceCopy=[],b.addAllItemsFromSourceCollection()})},b.prototype.dispose=function(){this.disp.dispose(),a.prototype.dispose.call(this)},b.prototype.referenceEquals=function(a,b){return g.getOid(a)===g.getOid(b)},b.prototype.refresh=function(){for(var a=this.sourceCopy.length,b=this.sourceCopy.map(function(a){return g.getOid(a)}),c=0;a>c;c++)this.onItemChanged(this.sourceCopy[c],b)},b.prototype.wireUpChangeNotifications=function(){var a=this;this.disp.add(this.source.itemsAdded.observeOn(this.scheduler).subscribe(function(b){a.onItemsAdded(b)})),this.disp.add(this.source.itemsRemoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsRemoved(b)})),this.disp.add(this.source.itemsMoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsMoved(b)})),this.disp.add(this.source.itemReplaced.observeOn(this.scheduler).subscribe(function(b){a.onItemsReplaced(b)})),this.disp.add(this.source.shouldReset.observeOn(this.scheduler).subscribe(function(b){a.reset()})),this.disp.add(this.source.itemChanged.select(function(a){return a.sender}).observeOn(this.scheduler).subscribe(function(b){return a.onItemChanged(b)})),null!=this.refreshTrigger&&this.disp.add(this.refreshTrigger.observeOn(this.scheduler).subscribe(function(b){return a.refresh()}))},b.prototype.onItemsAdded=function(a){this.shiftIndicesAtOrOverThreshold(a.from,a.items.length);for(var b=0;b<a.items.length;b++){var c=a.items[b];if(this.sourceCopy.splice(a.from+b,0,c),!this._filter||this._filter(c)){var d=this.selector(c);this.insertAndMap(a.from+b,d)}}},b.prototype.onItemsRemoved=function(a){this.sourceCopy.splice(a.from,a.items.length);for(var b=0;b<a.items.length;b++){var c=this.getIndexFromSourceIndex(a.from+b);-1!==c&&this.removeAtInternal(c)}var d=a.items.length;this.shiftIndicesAtOrOverThreshold(a.from+d,-d)},b.prototype.onItemsMoved=function(c){if(c.items.length>1&&f.throwError("Derived collections doesn't support multi-item moves"),c.from!==c.to){var d=c.from,e=c.to;this.sourceCopy.splice(d,1),this.sourceCopy.splice(e,0,c.items[0]);var g=this.getIndexFromSourceIndex(d);
if(this.moveSourceIndexInMap(d,e),-1!==g)if(null==this.orderer){var h=b.newPositionForExistingItem2(this.indexToSourceIndexMap,e,g);h!==g?(this.indexToSourceIndexMap.splice(g,1),this.indexToSourceIndexMap.splice(h,0,e),a.prototype.move.call(this,g,h)):this.indexToSourceIndexMap[g]=e}else this.indexToSourceIndexMap[g]=e}},b.prototype.onItemsReplaced=function(a){for(var b=this.isLengthAboveResetThreshold(a.items.length)?this.sourceCopy.map(function(a){return g.getOid(a)}):null,c=0;c<a.items.length;c++){var d=a.items[c];this.sourceCopy[a.from+c]=d,b&&(b[a.from+c]=g.getOid(d)),this.onItemChanged(d,b)}},b.prototype.onItemChanged=function(b,c){for(var d=this.indexOfAll(this.sourceCopy,b,c),e=!this._filter||this._filter(b),f=d.length,g=0;f>g;g++){var h=d[g],i=this.getIndexFromSourceIndex(h),j=i>=0;if(j&&!e)this.removeAtInternal(i);else if(!j&&e)this.insertAndMap(h,this.selector(b));else if(j&&e){var k=this.selector(b);if(null==this.orderer)this.referenceEquals(k,this.get(i))||a.prototype.set.call(this,i,k);else if(this.canItemStayAtPosition(k,i))this.referenceEquals(k,this.get(i))||a.prototype.set.call(this,i,k);else if(this.referenceEquals(k,this.get(i))){var l=this.newPositionForExistingItem(h,i,k);this.indexToSourceIndexMap.splice(i,1),this.indexToSourceIndexMap.splice(l,0,h),a.prototype.move.call(this,i,l)}else this.removeAtInternal(i),this.insertAndMap(h,k)}}},b.prototype.canItemStayAtPosition=function(a,b){var c=b>0;if(c){var d=this.orderer(a,this.get(b-1))>=0;if(!d)return!1}var e=b<this.length()-1;if(e){var f=this.orderer(a,this.get(b+1))<=0;if(!f)return!1}return!0},b.prototype.getIndexFromSourceIndex=function(a){return this.indexToSourceIndexMap.indexOf(a)},b.prototype.indexOfAll=function(a,b,c){var d=[],e=0,f=a.length;if(c)for(var h=g.getOid(b),i=0;f>i;i++){var j=c[i];h===j&&d.push(e),e++}else for(var i=0;f>i;i++){var k=a[i];this.referenceEquals(k,b)&&d.push(e),e++}return d},b.prototype.moveSourceIndexInMap=function(a,b){b>a?this.shiftSourceIndicesInRange(a+1,b+1,-1):this.shiftSourceIndicesInRange(b,a,1)},b.prototype.shiftIndicesAtOrOverThreshold=function(a,b){for(var c=0;c<this.indexToSourceIndexMap.length;c++)this.indexToSourceIndexMap[c]>=a&&(this.indexToSourceIndexMap[c]+=b)},b.prototype.shiftSourceIndicesInRange=function(a,b,c){for(var d=0;d<this.indexToSourceIndexMap.length;d++){var e=this.indexToSourceIndexMap[d];e>=a&&b>e&&(this.indexToSourceIndexMap[d]+=c)}},b.prototype.addAllItemsFromSourceCollection=function(){for(var a=0,b=this.source.length(),c=0;b>c;c++){var d=this.source.get(c);if(this.sourceCopy.push(d),!this._filter||this._filter(d)){var e=this.selector(d);this.insertAndMap(a,e)}a++}},b.prototype.insertAndMap=function(b,c){var d=this.positionForNewItem(b,c);this.indexToSourceIndexMap.splice(d,0,b),a.prototype.insert.call(this,d,c)},b.prototype.removeAtInternal=function(b){this.indexToSourceIndexMap.splice(b,1),a.prototype.removeAt.call(this,b)},b.prototype.positionForNewItem=function(a,c){return null==this.orderer?b.positionForNewItemArray(this.indexToSourceIndexMap,a,b.defaultOrderer):b.positionForNewItemArray2(this.inner,0,this.inner.length,c,this.orderer)},b.positionForNewItemArray=function(a,c,d){return b.positionForNewItemArray2(a,0,a.length,c,d)},b.positionForNewItemArray2=function(a,b,c,d,e){if(0===c)return b;if(1===c)return e(a[b],d)>=0?b:b+1;if(e(a[b],d)>=1)return b;for(var f,g=b,h=b+c-1;h>=g;){var i=Math.floor(g+(h-g)/2);if(f=e(a[i],d),0===f)return i;0>f?g=i+1:h=i-1}return g},b.prototype.newPositionForExistingItem=function(a,c,d){return null==this.orderer?b.newPositionForExistingItem2(this.indexToSourceIndexMap,a,c):b.newPositionForExistingItem2(this.inner,d,c,this.orderer)},b.newPositionForExistingItem2=function(a,c,d,e){if(1===a.length)return 0;var f=d-1,g=d+1,h=a[f>=0?f:g];null==e&&(e=b.defaultOrderer);var i=e(c,h),j=0,k=a.length;if(0===i)return d;if(i>0?j=g:k=f,j===a.length||0>k)return d;var l=b.positionForNewItemArray2(a,j,k-j,c,e);return l>=d?l-1:l},b.defaultOrderer=function(a,b){var c;return c=null==a&&null==b?0:null==a?-1:null==b?1:a-b},b}(q)},function(a,b){"use strict";var c=function(){function a(a){this.createValue=a}return Object.defineProperty(a.prototype,"value",{get:function(){return this.isValueCreated||(this.createdValue=this.createValue(),this.isValueCreated=!0),this.createdValue},enumerable:!0,configurable:!0}),a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){function d(a,b,c){var d=new f(a,b,c),g=e.extend(d,new Rx.Subject,!0);return g}var e=c(1),f=function(){function a(a,b,c){this._observerRefCount=0,this._defaultObserverSub=Rx.Disposable.empty,this._scheduler=a,this._defaultObserver=b,this._subject=c||new Rx.Subject,null!=b&&(this._defaultObserverSub=this._subject.observeOn(this._scheduler).subscribe(this._defaultObserver))}return a.prototype.dispose=function(){e.isDisposable(this._subject)&&this._subject.dispose()},a.prototype.onCompleted=function(){this._subject.onCompleted()},a.prototype.onError=function(a){this._subject.onError(a)},a.prototype.onNext=function(a){this._subject.onNext(a)},a.prototype.subscribe=function(a){var b=this;return this._defaultObserverSub&&this._defaultObserverSub.dispose(),this._observerRefCount++,new Rx.CompositeDisposable(this._subject.observeOn(this._scheduler).subscribe(a),Rx.Disposable.create(function(){--b._observerRefCount<=0&&null!=b._defaultObserver&&(b._defaultObserverSub=b._subject.observeOn(b._scheduler).subscribe(b._defaultObserver))}))},a}();b.createScheduledSubject=d},function(a,b){"use strict";var c=function(){function a(a,b){void 0===b&&(b=1),this.inner=a,this.refCount=b}return a.prototype.addRef=function(){this.refCount++},a.prototype.release=function(){return 0===--this.refCount&&(this.inner.dispose(),this.inner=null),this.refCount},a.prototype.dispose=function(){this.release()},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){function d(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];try{console.log.apply(console,arguments)}catch(c){try{window.opera.postError.apply(window.opera,arguments)}catch(c){alert(Array.prototype.join.call(arguments," "))}}}function e(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("**** WebRx Critical: "+a)}function f(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("*** WebRx Error: "+a)}function g(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.length&&(a=i.formatString.apply(null,[a].concat(b))),d("* WebRx Info: "+a)}function h(a){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];b.hintEnable&&(c.length&&(a=i.formatString.apply(null,[a].concat(c))),d("* WebRx Hint: "+a))}var i=c(1);b.hintEnable=!1,b.critical=e,b.error=f,b.info=g,b.hint=h},function(a,b,c){var d=c(1),e=c(3),f=c(10),g=c(11),h=c(4),i=function(){function a(a,b,c,e){this.disp=new Rx.CompositeDisposable,this.changeNotificationsSuppressed=0,this.resetSubject=new Rx.Subject,this.beforeResetSubject=new Rx.Subject,this.updateLengthTrigger=new Rx.Subject,this.source=a,this.scheduler=e||(d.isRxScheduler(c)?c:Rx.Scheduler.immediate),this.pageSize=h.property(b),this.currentPage=h.property(c||0);var i=Rx.Observable.merge(this.updateLengthTrigger,a.lengthChanged).startWith(!0).observeOn(Rx.Scheduler.immediate);this.pageCount=d.whenAny(this.pageSize,i,function(b,c){return Math.ceil(a.length()/b)}).distinctUntilChanged().toProperty(),this.disp.add(this.pageCount),this.length=d.whenAny(this.currentPage,this.pageSize,i,function(b,c,d){return Math.max(Math.min(a.length()-c*b,c),0)}).distinctUntilChanged().toProperty(),this.disp.add(this.length),this.isEmpty=this.lengthChanged.select(function(a){return 0===a}).toProperty(0===this.length()),this.disp.add(this.isEmpty),this.isEmptyChanged=d.whenAny(this.length,function(a){return 0==a}).distinctUntilChanged(),this.beforeItemsAddedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsAddedSubject=new f["default"](function(){return new Rx.Subject}),this.beforeItemsRemovedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsRemovedSubject=new f["default"](function(){return new Rx.Subject}),this.beforeItemReplacedSubject=new f["default"](function(){return new Rx.Subject}),this.itemReplacedSubject=new f["default"](function(){return new Rx.Subject}),this.itemChangingSubject=new f["default"](function(){return g.createScheduledSubject(e)}),this.itemChangedSubject=new f["default"](function(){return g.createScheduledSubject(e)}),this.beforeItemsMovedSubject=new f["default"](function(){return new Rx.Subject}),this.itemsMovedSubject=new f["default"](function(){return new Rx.Subject}),this.shouldReset=this.resetSubject.asObservable(),this.listChanged=Rx.Observable.merge(this.itemsAdded.select(function(a){return!1}),this.itemsRemoved.select(function(a){return!1}),this.itemReplaced.select(function(a){return!1}),this.itemsMoved.select(function(a){return!1}),this.resetSubject.select(function(a){return!0})).publish().refCount(),this.listChanging=Rx.Observable.merge(this.beforeItemsAdded.select(function(a){return!1}),this.beforeItemsRemoved.select(function(a){return!1}),this.beforeItemReplaced.select(function(a){return!1}),this.beforeItemsMoved.select(function(a){return!1}),this.beforeResetSubject.select(function(a){return!0})).publish().refCount(),this.wireUpChangeNotifications()}return a.prototype.queryInterface=function(a){return a===e["default"].IObservableList||a===e["default"].IDisposable},a.prototype.get=function(a){return a=this.pageSize()*this.currentPage()+a,this.source.get(a)},Object.defineProperty(a.prototype,"isReadOnly",{get:function(){return!0},enumerable:!0,configurable:!0}),a.prototype.indexOf=function(a){return this.toArray().indexOf(a)},a.prototype.contains=function(a){return-1!==this.indexOf(a)},a.prototype.toArray=function(){var a=this.pageSize()*this.currentPage();return this.source.toArray().slice(a,a+this.length())},a.prototype.forEach=function(a,b){this.toArray().forEach(a,b)},a.prototype.map=function(a,b){return this.toArray().map(a,b)},a.prototype.filter=function(a,b){return this.toArray().filter(a,b)},a.prototype.some=function(a,b){return this.toArray().some(a,b)},a.prototype.every=function(a,b){return this.toArray().every(a,b)},a.prototype.suppressChangeNotifications=function(){var a=this;return this.changeNotificationsSuppressed++,Rx.Disposable.create(function(){a.changeNotificationsSuppressed--,0===a.changeNotificationsSuppressed&&(a.publishBeforeResetNotification(),a.publishResetNotification())})},a.prototype.dispose=function(){this.disp.dispose()},Object.defineProperty(a.prototype,"itemsAdded",{get:function(){return this._itemsAdded||(this._itemsAdded=this.itemsAddedSubject.value.asObservable()),this._itemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsAdded",{get:function(){return this._beforeItemsAdded||(this._beforeItemsAdded=this.beforeItemsAddedSubject.value.asObservable()),this._beforeItemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsRemoved",{get:function(){return this._itemsRemoved||(this._itemsRemoved=this.itemsRemovedSubject.value.asObservable()),this._itemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsRemoved",{get:function(){return this._beforeItemsRemoved||(this._beforeItemsRemoved=this.beforeItemsRemovedSubject.value.asObservable()),this._beforeItemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemReplaced",{get:function(){return this._itemReplaced||(this._itemReplaced=this.itemReplacedSubject.value.asObservable()),this._itemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemReplaced",{get:function(){return this._beforeItemReplaced||(this._beforeItemReplaced=this.beforeItemReplacedSubject.value.asObservable()),this._beforeItemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beforeItemsMoved",{get:function(){return this._beforeItemsMoved||(this._beforeItemsMoved=this.beforeItemsMovedSubject.value.asObservable()),this._beforeItemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemsMoved",{get:function(){return this._itemsMoved||(this._itemsMoved=this.itemsMovedSubject.value.asObservable()),this._itemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanging",{get:function(){return this._lengthChanging||(this._lengthChanging=this.length.changing.distinctUntilChanged()),this._lengthChanging},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lengthChanged",{get:function(){return this._lengthChanged||(this._lengthChanged=this.length.changed.distinctUntilChanged()),this._lengthChanged},enumerable:!0,configurable:!0}),a.prototype.wireUpChangeNotifications=function(){var a=this;this.disp.add(this.source.itemsAdded.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.onItemsAdded(b)})),this.disp.add(this.source.itemsRemoved.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.onItemsRemoved(b)})),this.disp.add(this.source.itemsMoved.observeOn(this.scheduler).subscribe(function(b){a.onItemsMoved(b)})),this.disp.add(this.source.itemReplaced.observeOn(this.scheduler).subscribe(function(b){a.onItemsReplaced(b)})),this.disp.add(this.source.shouldReset.observeOn(this.scheduler).subscribe(function(b){a.updateLengthTrigger.onNext(!0),a.publishBeforeResetNotification(),a.publishResetNotification()})),this.disp.add(d.whenAny(this.pageSize,this.currentPage,function(a,b){return!0}).observeOn(this.scheduler).subscribe(function(b){a.publishBeforeResetNotification(),a.publishResetNotification()}))},a.prototype.getPageRange=function(){var a=this.currentPage()*this.pageSize(),b={from:a,to:a+this.length()};return b},a.prototype.publishResetNotification=function(){this.resetSubject.onNext(!0)},a.prototype.publishBeforeResetNotification=function(){this.beforeResetSubject.onNext(!0)},a.prototype.onItemsAdded=function(a){var b=this.getPageRange();if(!(a.from>b.to))if(a.from<b.from)this.publishBeforeResetNotification(),this.publishResetNotification();else{var c=a.from-b.from,d=Math.min(this.length()-c,a.items.length),e=a.items.length!==d?a.items.slice(0,d):a.items,f={from:c,items:e};this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext(f),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext(f)}},a.prototype.onItemsRemoved=function(a){var b=this.getPageRange();if(!(a.from>b.to))if(a.from<b.from)this.publishBeforeResetNotification(),this.publishResetNotification();else{var c=a.from-b.from,d=Math.min(this.length()-c,a.items.length),e=a.items.length!==d?a.items.slice(0,d):a.items,f={from:c,items:e};this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext(f),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext(f)}},a.prototype.onItemsMoved=function(a){var b,c=this.getPageRange(),d=0,e=0;if(!(a.from>=c.to&&a.to>=c.to||a.from<c.from&&a.to<c.from)){if(a.from>=c.from&&a.from<c.to){if(a.to>=c.from&&a.to<c.to)return d=a.from-c.from,e=a.to-c.from,b={from:d,to:e,items:a.items},this.beforeItemsMovedSubject.isValueCreated&&this.beforeItemsMovedSubject.value.onNext(b),void(this.itemsMovedSubject.isValueCreated&&this.itemsMovedSubject.value.onNext(b));if(a.to>=c.to){var f=this.length()-1;return d=a.from-c.from,void(d!==f?(b={from:d,items:a.items},this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext(b),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext(b),d=this.length()-1,b={from:d,items:[this.get(d)]},this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext(b),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext(b)):(d=this.length()-1,b={from:d,items:[this.get(d)]},this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext(b),this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext(b)))}}this.publishBeforeResetNotification(),this.publishResetNotification()}},a.prototype.onItemsReplaced=function(a){var b=this.getPageRange();if(!(a.from>b.to||a.from<b.from)){var c=a.from-b.from,d={from:c,items:a.items};this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext(d),this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext(d)}},a}();b.PagedObservableListProjection=i},function(a,b,c){function d(a){return null==a?!1:a instanceof e.ObservableList||a instanceof f.PagedObservableListProjection}var e=c(9),f=c(14);b.isList=d},function(a,b){"use strict";function c(a){return"function"==typeof a}function d(a){return a||!g?new e:new Map}var e=function(){function a(){this.cacheSentinel={},this.keys=[],this.values=[],this.cache=this.cacheSentinel}return Object.defineProperty(a.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),a.prototype.has=function(a){return a===this.cache?!0:this.find(a)>=0?(this.cache=a,!0):!1},a.prototype.get=function(a){var b=this.find(a);return b>=0?(this.cache=a,this.values[b]):void 0},a.prototype.set=function(a,b){return this["delete"](a),this.keys.push(a),this.values.push(b),this.cache=a,this},a.prototype["delete"]=function(a){var b=this.find(a);return b>=0?(this.keys.splice(b,1),this.values.splice(b,1),this.cache=this.cacheSentinel,!0):!1},a.prototype.clear=function(){this.keys.length=0,this.values.length=0,this.cache=this.cacheSentinel},a.prototype.forEach=function(a,b){for(var c=this.size,d=0;c>d;++d){var e=this.keys[d],f=this.values[d];this.cache=e,a.call(this,f,e,this)}},Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a.prototype.find=function(a){for(var b=this.keys,c=b.length,d=0;c>d;++d)if(b[d]===a)return d;return-1},a}(),f=null!=window&&void 0!==window.Map?Map.prototype:void 0,g=null!=window&&c(window.Map)&&c(f.forEach)&&c(f.set)&&c(f.clear)&&c(f["delete"])&&c(f.has);b.createMap=d},function(a,b,c){function d(a){return"function"==typeof a}function e(a){return a||!j?new h:new Set}function f(a){var b=new Array;return a.forEach(function(a){return b.push(a)}),b}var g=c(8),h=function(){function a(){this.values=[],this.keys={}}return a.prototype.add=function(a){var b=g.getOid(a);return this.keys[b]||(this.values.push(a),this.keys[b]=!0),this},a.prototype["delete"]=function(a){var b=g.getOid(a);if(this.keys[b]){var c=this.values.indexOf(a);return this.values.splice(c,1),delete this.keys[b],!0}return!1},a.prototype.has=function(a){var b=g.getOid(a);return this.keys.hasOwnProperty(b)},a.prototype.clear=function(){this.keys={},this.values.length=0},a.prototype.forEach=function(a,b){this.values.forEach(a,b)},Object.defineProperty(a.prototype,"size",{get:function(){return this.values.length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a}(),i=null!=window&&void 0!==window.Set?Set.prototype:void 0,j=null!=window&&d(window.Set)&&d(i.forEach)&&d(i.add)&&d(i.clear)&&d(i["delete"])&&d(i.has);b.createSet=e,b.setToArray=f},function(a,b,c){function d(a){return"function"==typeof a}function e(a){return a||!i?new g:new WeakMap}var f=c(8),g=function(){function a(){this.inner={}}return a.prototype.set=function(a,b){var c=f.getOid(a);this.inner[c]=b},a.prototype.get=function(a){var b=f.getOid(a);return this.inner[b]},a.prototype.has=function(a){var b=f.getOid(a);return this.inner.hasOwnProperty(b)},a.prototype["delete"]=function(a){var b=f.getOid(a);return delete this.inner[b]},Object.defineProperty(a.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),a}(),h=null!=window&&void 0!==window.WeakMap?WeakMap.prototype:void 0,i=null!=window&&d(window.WeakMap)&&d(h.set)&&d(h.get)&&d(h["delete"])&&d(h.has);b.createWeakMap=e},function(a,b){"use strict";function c(){return d.defaults}var d=function(){function a(){this.config={}}return a.prototype.res=function(a){return{status:a.status,response:a.response,xhr:a}},a.prototype.assign=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d in b)if({}.hasOwnProperty.call(b,d)){var e=b[d];if("object"==typeof e)for(var f in e)({}).hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a},a.prototype.promise=function(b,c){return(b&&b.promise?b.promise:this.config.promise||a.defaults.promise)(c)},a.prototype.configure=function(a){this.config=this.assign({},this.config,a)},a.prototype.request=function(b){var c=this;return this.promise(b,function(d,e){var f=c.assign({},a.defaults,c.config,b),g=f.xmlHttpRequest();("string"!=typeof f.url||0===f.url.length)&&e(new Error("HttpClient: Please provide a request url")),a.Methods.hasOwnProperty(f.method.toUpperCase())||e(new Error("HttpClient: Unrecognized http-method: "+f.method));var h=f.url;f.params&&(h+=-1!==h.indexOf("?")?"&"!=h[h.length-1]?"&":"":"?",h+=Object.getOwnPropertyNames(f.params).map(function(a){return a+"="+f.params[a]}).join("&")),g.open(f.method.toUpperCase(),h,!0),g.addEventListener(a.Events.LOAD,function(){if(g.status>=200&&g.status<300){var a=null;g.responseText&&(a=f.raw===!0?g.responseText:f.load(g.responseText)),d(a)}else e(c.res(g))}),g.addEventListener(a.Events.ABORT,function(){return e(c.res(g))}),g.addEventListener(a.Events.ERROR,function(){return e(c.res(g))}),g.addEventListener(a.Events.TIMEOUT,function(){return e(c.res(g))});for(var i in f.headers)({}).hasOwnProperty.call(f.headers,i)&&g.setRequestHeader(i,f.headers[i]);for(var i in f.events)({}).hasOwnProperty.call(f.events,i)&&g.addEventListener(i,f.events[i].bind(null,g),!1);var j="object"!=typeof f.data||f.raw?f.data:f.dump(f.data);void 0!==j?g.send(j):g.send()})},a.prototype.get=function(b,c,d){var e={url:b,method:a.Methods.GET,params:c};return this.request(this.assign(e,d))},a.prototype.put=function(b,c,d){var e={url:b,method:a.Methods.PUT,data:c};return this.request(this.assign(e,d))},a.prototype.post=function(b,c,d){var e={url:b,method:a.Methods.POST,data:c};return this.request(this.assign(e,d))},a.prototype.patch=function(b,c,d){var e={url:b,method:a.Methods.PATCH,data:c};return this.request(this.assign(e,d))},a.prototype["delete"]=function(b,c){var d={url:b,method:a.Methods.DELETE};return this.request(this.assign(d,c))},a.prototype.options=function(b,c){var d={url:b,method:a.Methods.OPTIONS};return this.request(this.assign(d,c))},a.Methods={GET:"get",POST:"post",PUT:"put",DELETE:"delete",PATCH:"patch",OPTIONS:"options"},a.Events={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"},a.defaults={method:a.Methods.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(a){return new Promise(a)}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d,b.getHttpClientDefaultConfig=c},function(a,b,c){function d(a,b){b=b||Rx.Scheduler.currentThread;var c=function(a){return arguments.length>0&&g.throwError("attempt to write to a read-only observable property"),c.value};c.queryInterface=function(a){return a===h["default"].IObservableProperty||a===h["default"].IDisposable},c.dispose=function(){c.sub&&(c.sub.dispose(),c.sub=null)},c.value=a,c.changedSubject=new Rx.Subject,c.changed=c.changedSubject.asObservable(),c.changingSubject=new Rx.Subject,c.changing=c.changingSubject.asObservable(),c.source=this,c.thrownExceptions=i.createScheduledSubject(b,j.injector.get(k.app).defaultExceptionHandler);var d=!1;return c.sub=this.distinctUntilChanged().subscribe(function(a){d&&a===c.value||(d=!0,c.changingSubject.onNext(a),c.value=a,c.changedSubject.onNext(a))},function(a){return c.thrownExceptions.onNext(a)}),c}function e(a){return this.select(function(b){return{parameter:b,command:a instanceof Function?a():a}}).debounce(function(a){return a.command.canExecuteObservable.startWith(a.command.canExecute(a.parameter)).where(function(a){return a}).select(function(a){return 0})}).select(function(a){return a.command.executeAsync(a.parameter)["catch"](Rx.Observable.empty())})["switch"]().subscribe()}function f(){}var g=c(1),h=c(3),i=c(11),j=c(6),k=c(7),l=Rx.Observable;l.prototype.toProperty=d,l.prototype.continueWith=function(){var a=g.args2Array(arguments),b=a.shift(),c=void 0;if(g.isRxObservable(b))c=b;else if(g.isFunction(b)){var d=b;c=Rx.Observable.startDeferred(d)}return this.selectMany(function(a){return c})},l.prototype.invokeCommand=e,l.startDeferred=function(a){return Rx.Observable.defer(function(){return Rx.Observable.create(function(b){var c=!1;return c||a(),b.onNext(void 0),b.onCompleted(),Rx.Disposable.create(function(){return c=!0})})})},b.install=f},function(a,b,c){var d=c(11),e=function(){function a(){this.messageBus={},this.schedulerMappings={}}return a.prototype.listen=function(a){return this.setupSubjectIfNecessary(a).skip(1)},a.prototype.isRegistered=function(a){return this.messageBus.hasOwnProperty(a)},a.prototype.registerMessageSource=function(a,b){return a.subscribe(this.setupSubjectIfNecessary(b))},a.prototype.sendMessage=function(a,b){this.setupSubjectIfNecessary(b).onNext(a)},a.prototype.registerScheduler=function(a,b){this.schedulerMappings[b]=a},a.prototype.setupSubjectIfNecessary=function(a){var b=this.messageBus[a];return null==b&&(b=d.createScheduledSubject(this.getScheduler(a),null,new Rx.BehaviorSubject(void 0)),this.messageBus[a]=b),b},a.prototype.getScheduler=function(a){var b=this.schedulerMappings[a];return b||Rx.Scheduler.currentThread},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}])});
//# sourceMappingURL=web.rx.lite.min.js.map